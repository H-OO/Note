# 计算机编码

目的：了解编码历史与区别

主要有：  
1.ASCII  
2.Unicode  
3.UTF-8  

## ASCII

八位字节组合出256（2的8次方）种不同的状态

美国编写到第127号，刚好将所有空格、标点符号、数字、大小写字母都编入（半角字符）

剩余的第128到255号称为扩展字符集，供其他国家使用（全角字符）

其他国家都根据自己的需求定制了扩展字符集

中国使用时，重新定义扩展字符集，规定当两个大于127的字符连在一起时，表示一个汉字

随后出现 GB2312、GBK、GB18030 这些编码标准，统称 DBCS （双字节字符集）

不同国家都搞了一套自己的编码标准，这导致谁也不懂谁的编码，相互不支持

最终，ISO（国际标准化组织）决定着手解决这个问题，推出 Unicode , 俗称万国码

## Unicode

万国码

用两个字节，也就是16位表示所有的字符

对 ASCII 的那些半角字符，Unicode 还保持其原编码不变，只是将其长度由原来的8位扩展成16位

对 ASCII 的那些全角字符，Unicode 进行重新编码

半角字符的高8位永远为0，这种方案导致在保存英文文本会多浪费一倍的空间

从 Unicode 推出后，统一术语：字符与字节

无论是半角的英语还是全角的汉字，都成为一个字符，也可称为两个字节

也就是说，在 Unicode 中，一个字符就是两个字节，之前一个汉字算两个英文字符的时代已过去

## UTF-8

互联网时代，为数据传输而设计的编码，基于 Unicode 来实现，每次8个位传输数据

UTF-8 最大的特点就是它是一种变长的编码方式

它可以使用1~4个字节表示一个符号，根据不同的符号而变化字节长度

当字符在 ASCII 码范围时，就用一个字节表示

注意：在 Unicode 中汉字占两个字节，而 UTF-8 中汉字占三个字节

### Unicode 与 UTF-8的区别

Unicode 与 UTF-8 不是直接对应的，需要通过一些算法和规则转换

首先了解一下 Unicode 和 UTF-8 字符集编码表，以下是字母和汉字分别对应的编码

每个字符对应一个十六进制数字

```
-----------------------------------
     Unicode 编码  |   UTF-8编码
-----------------------------------
 I     \u0049           &#x0049
 知    \u77e5           &#x77E5
 乎    \u4e4e           &#x4E4E
-----------------------------------
```

计算机只认识二进制

```
Unicode 转 二进制
--------------------------------
I | 00000000 01001001

知 | 01110111 11100101
乎 | 01001110 01001110
--------------------------------

UTF-8 转 二进制
--------------------------------
I | 01001001

知 | 11100111 10011111 10100101
乎 | 11100100 10111001 10001110
--------------------------------
```

UTF-8 是怎么处理半角字符与全角字符的

半角字符：依旧保留 ASCII 的方式，一个字符占用一个字节

全角字符：汉字从两个字节变三个字节

UTF-8 是怎么做的：

单字节的字符，字节的第一位设置为0，剩余字节用对应的 ASCII 码进行填充，与 ASCII 码是完全相同的

n个字节的字符(n>1)，第一个字节的前n位设为1，第n+1位设为0，后面字节的前两位都设为10

例如：1110xxxx 10xxxxxx 10xxxxxx

剩余空位使用该字符的 Unicode 编码进行填充

这样就形成了如下的UTF-8标记位：

0xxxxxxx  
110xxxxx 10xxxxxx  
1110xxxx 10xxxxxx 10xxxxxx  
11110xxx 10xxxxxx 10xxxxxx 10xxxxxx  
111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx  
1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx  
